<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Digilayn</title>
    <meta name="author" content="Musa Mgijima">
    <meta name="description" content="Login to your Digilayn account.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="icon" href="../favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon/favicon-96x96.png">
    <link rel="icon" type="image/svg+xml" href="../favicon/favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-touch-icon.png">
</head>
<body class="font-sans antialiased bg-gray-50 dark:bg-slate-900">

<header class="max-w-6xl mx-auto pt-24 pb-16 px-6 text-center">
    <a href="../index.html" class="text-6xl font-extrabold mb-4 tracking-tight">digilayn</a>
</header>

<main class="max-w-md mx-auto px-6 pb-24">
    <div class="card flex flex-col p-8 rounded-2xl border-l-4 border-l-green-500">
        <h2 class="text-2xl font-bold mb-6 text-center">Login</h2>
        <form id="login-form">
            <div class="mb-4">
                <input type="email" id="email" name="email" placeholder="Email" class="w-full p-3 rounded-lg bg-gray-200 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-transparent focus:border-green-500 focus:outline-none transition" required>
            </div>
            <div class="mb-6">
                <input type="password" id="password" name="password" placeholder="Password" class="w-full p-3 rounded-lg bg-gray-200 dark:bg-slate-800 text-gray-900 dark:text-white border-2 border-transparent focus:border-green-500 focus:outline-none transition" required>
            </div>
            <div class="flex items-center justify-between">
                <button type="submit" class="w-full px-8 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition shadow-md">
                    Login
                </button>
            </div>
              <a href="#" class="inline-block align-baseline font-bold text-sm text-green-500 hover:text-green-800 mt-4">
                    Forgot Password?
                </a>
        </form>
        <p class="text-center text-sm opacity-70 mt-6">
            Don't have an account? <a href="register.html" class="text-green-500 hover:text-green-700 font-bold">Register</a>.
        </p>
    </div>
</main>

<footer class="text-center py-12 border-t border-gray-100 dark:border-slate-800 opacity-50 text-xs">
    &copy; 2026 Digilayn. Empowering poortjie economies.
</footer>

<script src="../scripts/theme.js"></script>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="../scripts/firebase.js"></script>
<script>
    const loginForm = document.getElementById('login-form');
    loginForm.addEventListener('submit', event => {
        event.preventDefault();
        const email = loginForm.email.value;
        const password = loginForm.password.value;

        auth.signInWithEmailAndPassword(email, password)
            .then(userCredential => {
                // Login successful
                const redirectUrl = sessionStorage.getItem('redirectUrl');
                if (redirectUrl) {
                    sessionStorage.removeItem('redirectUrl');
                    window.location.href = redirectUrl;
                } else {
                    window.location.href = '../index.html'; // Default redirect
                }
            })
            .catch(error => {
                console.error("Login failed: ", error);
                alert(error.message);
            });
    });
</script>

</body>
</html>
